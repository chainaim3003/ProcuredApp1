"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./contexts/PasskeyWalletContext.tsx":
/*!*******************************************!*\
  !*** ./contexts/PasskeyWalletContext.tsx ***!
  \*******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PasskeyWalletProvider: function() { return /* binding */ PasskeyWalletProvider; },\n/* harmony export */   usePasskeyWallet: function() { return /* binding */ usePasskeyWallet; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _VLEIContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./VLEIContext */ \"(app-pages-browser)/./contexts/VLEIContext.tsx\");\n/* harmony import */ var _lib_passkey_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/passkey-auth */ \"(app-pages-browser)/./lib/passkey-auth.ts\");\n/* __next_internal_client_entry_do_not_use__ usePasskeyWallet,PasskeyWalletProvider auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\nconst PasskeyWalletContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nfunction usePasskeyWallet() {\n    _s();\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(PasskeyWalletContext);\n    if (context === undefined) {\n        throw new Error(\"usePasskeyWallet must be used within a PasskeyWalletProvider\");\n    }\n    return context;\n}\n_s(usePasskeyWallet, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nfunction PasskeyWalletProvider(param) {\n    let { children } = param;\n    _s1();\n    const { vlei, verifyCredentials } = (0,_VLEIContext__WEBPACK_IMPORTED_MODULE_2__.useVLEI)();\n    const [wallet, setWallet] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isConnected: false,\n        address: null,\n        contractId: null,\n        role: null,\n        credentials: null,\n        error: null,\n        loading: false\n    });\n    const [passkeyService, setPasskeyService] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const connectWallet = async (role)=>{\n        try {\n            setWallet((prev)=>({\n                    ...prev,\n                    error: null,\n                    loading: true\n                }));\n            console.log(\"\\uD83D\\uDD10 Starting biometric authentication for \".concat(role, \"...\"));\n            // Create PasskeyAuthenticator instance\n            const config = (0,_lib_passkey_auth__WEBPACK_IMPORTED_MODULE_3__.getDefaultPasskeyConfig)();\n            const authenticator = (0,_lib_passkey_auth__WEBPACK_IMPORTED_MODULE_3__.createPasskeyAuthenticator)(config);\n            // Step 1: Authenticate with Passkey (biometric) - following the flow diagram\n            const userName = role === \"buyer\" ? \"John Doe - TechCorp CFO\" : \"Jane Smith - SupplierCo Sales\";\n            // Create or connect to smart wallet with biometric authentication\n            const walletInfo = await authenticator.createOrConnectWallet(userName, role);\n            // Store authenticator for future use\n            setPasskeyService(authenticator);\n            const address = walletInfo.address;\n            const contractId = walletInfo.contractId;\n            // Verify vLEI credentials\n            let credentials = null;\n            if (vlei.isInitialized) {\n                try {\n                    credentials = await verifyCredentials(role);\n                } catch (error) {\n                    console.warn(\"vLEI credential verification failed:\", error);\n                // Continue without credentials for now\n                }\n            }\n            setWallet({\n                isConnected: true,\n                address,\n                contractId,\n                role,\n                credentials,\n                error: null,\n                loading: false\n            });\n            // Store in localStorage for persistence\n            localStorage.setItem(\"passkeyWalletState\", JSON.stringify({\n                isConnected: true,\n                address,\n                contractId,\n                role,\n                credentials\n            }));\n            console.log(\"✅ \".concat(role, \" wallet connected successfully\"));\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : \"Failed to connect wallet\";\n            setWallet((prev)=>({\n                    ...prev,\n                    error: errorMessage,\n                    loading: false\n                }));\n            console.error(\"❌ Wallet connection failed:\", error);\n        }\n    };\n    const disconnectWallet = ()=>{\n        try {\n            if (passkeyService && typeof passkeyService.disconnect === \"function\") {\n                passkeyService.disconnect();\n            }\n        } catch (error) {\n            console.warn(\"Error during wallet disconnect:\", error);\n        }\n        setWallet({\n            isConnected: false,\n            address: null,\n            contractId: null,\n            role: null,\n            credentials: null,\n            error: null,\n            loading: false\n        });\n        setPasskeyService(null);\n        localStorage.removeItem(\"passkeyWalletState\");\n        console.log(\"\\uD83D\\uDD0C Wallet disconnected\");\n    };\n    const switchRole = async (role)=>{\n        if (wallet.isConnected) {\n            await connectWallet(role);\n        }\n    };\n    const executeTransaction = async (params)=>{\n        if (!passkeyService || !wallet.isConnected) {\n            throw new Error(\"Wallet not connected\");\n        }\n        try {\n            setWallet((prev)=>({\n                    ...prev,\n                    loading: true,\n                    error: null\n                }));\n            console.log(\"\\uD83D\\uDD10 Executing transaction with biometric authentication...\");\n            // Step 3: Sign transaction with passkey (following the flow diagram)\n            const userName = wallet.role === \"buyer\" ? \"John Doe - TechCorp CFO\" : \"Jane Smith - SupplierCo Sales\";\n            // Use the authenticator to sign the transaction with biometric authentication\n            if (passkeyService && typeof passkeyService.signTransactionWithPasskey === \"function\") {\n                const result = await passkeyService.signTransactionWithPasskey(params, userName);\n                setWallet((prev)=>({\n                        ...prev,\n                        loading: false\n                    }));\n                return result;\n            } else {\n                // Fallback to mock implementation\n                const result = await passkeyService.executeTransaction(params);\n                setWallet((prev)=>({\n                        ...prev,\n                        loading: false\n                    }));\n                return result;\n            }\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : \"Transaction failed\";\n            setWallet((prev)=>({\n                    ...prev,\n                    error: errorMessage,\n                    loading: false\n                }));\n            throw error;\n        }\n    };\n    const getAccountInfo = async ()=>{\n        if (!passkeyService || !wallet.isConnected) {\n            throw new Error(\"Wallet not connected\");\n        }\n        return await passkeyService.getAccountInfo();\n    };\n    // Restore wallet state on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const savedState = localStorage.getItem(\"passkeyWalletState\");\n        if (savedState) {\n            try {\n                const parsed = JSON.parse(savedState);\n                if (parsed.isConnected && parsed.role) {\n                    // Don't auto-connect, just restore the state\n                    setWallet((prev)=>({\n                            ...prev,\n                            ...parsed,\n                            loading: false,\n                            error: null\n                        }));\n                }\n            } catch (error) {\n                console.error(\"Failed to restore wallet state:\", error);\n                localStorage.removeItem(\"passkeyWalletState\");\n            }\n        }\n    }, []);\n    // Update credentials when vLEI is initialized and credentials are available\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (vlei.isInitialized && wallet.isConnected && wallet.role) {\n            // Check if credentials are available before trying to verify\n            const hasCredentials = wallet.role === \"buyer\" ? vlei.credentials.john && vlei.credentials.techcorp : vlei.credentials.jane && vlei.credentials.supplierco;\n            if (hasCredentials) {\n                verifyCredentials(wallet.role).then((credentials)=>{\n                    setWallet((prev)=>({\n                            ...prev,\n                            credentials\n                        }));\n                }).catch((error)=>{\n                    console.warn(\"Failed to update credentials:\", error);\n                });\n            } else {\n                // Use mock credentials if real ones aren't available yet\n                const mockCredentials = {\n                    valid: true,\n                    orgLEI: wallet.role === \"buyer\" ? \"506700GE1G29325QX363\" : \"549300XOCUZD4EMKGY96\",\n                    personName: wallet.role === \"buyer\" ? \"John Doe\" : \"Jane Smith\",\n                    role: wallet.role === \"buyer\" ? \"Procurement Manager\" : \"Contract Signer\",\n                    spendingLimit: wallet.role === \"buyer\" ? 100000 : 500000,\n                    maxContractValue: wallet.role === \"buyer\" ? 100000 : 500000,\n                    details: {\n                        orgName: wallet.role === \"buyer\" ? \"TechCorp Inc.\" : \"SupplierCo LLC\",\n                        lei: wallet.role === \"buyer\" ? \"506700GE1G29325QX363\" : \"549300XOCUZD4EMKGY96\",\n                        personName: wallet.role === \"buyer\" ? \"John Doe\" : \"Jane Smith\",\n                        role: wallet.role === \"buyer\" ? \"Procurement Manager\" : \"Contract Signer\",\n                        spendingLimit: wallet.role === \"buyer\" ? 100000 : 500000,\n                        maxContractValue: wallet.role === \"buyer\" ? 100000 : 500000\n                    }\n                };\n                setWallet((prev)=>({\n                        ...prev,\n                        credentials: mockCredentials\n                    }));\n            }\n        }\n    }, [\n        vlei.isInitialized,\n        wallet.isConnected,\n        wallet.role,\n        vlei.credentials\n    ]);\n    const value = {\n        wallet,\n        connectWallet,\n        disconnectWallet,\n        switchRole,\n        executeTransaction,\n        getAccountInfo\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PasskeyWalletContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/amanpal/Desktop/Stellar-Smart Contract-Wallets/contexts/PasskeyWalletContext.tsx\",\n        lineNumber: 258,\n        columnNumber: 5\n    }, this);\n}\n_s1(PasskeyWalletProvider, \"LgI1+g3DTq8nAWsUs9BBnVbs2c0=\", false, function() {\n    return [\n        _VLEIContext__WEBPACK_IMPORTED_MODULE_2__.useVLEI\n    ];\n});\n_c = PasskeyWalletProvider;\nvar _c;\n$RefreshReg$(_c, \"PasskeyWalletProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbnRleHRzL1Bhc3NrZXlXYWxsZXRDb250ZXh0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFFd0Y7QUFDakQ7QUFDdUU7QUFxQjlHLE1BQU1RLHFDQUF1QlAsb0RBQWFBLENBQXVDUTtBQUUxRSxTQUFTQzs7SUFDZCxNQUFNQyxVQUFVVCxpREFBVUEsQ0FBQ007SUFDM0IsSUFBSUcsWUFBWUYsV0FBVztRQUN6QixNQUFNLElBQUlHLE1BQU07SUFDbEI7SUFDQSxPQUFPRDtBQUNUO0dBTmdCRDtBQVlULFNBQVNHLHNCQUFzQixLQUF3QztRQUF4QyxFQUFFQyxRQUFRLEVBQThCLEdBQXhDOztJQUNwQyxNQUFNLEVBQUVDLElBQUksRUFBRUMsaUJBQWlCLEVBQUUsR0FBR1gscURBQU9BO0lBQzNDLE1BQU0sQ0FBQ1ksUUFBUUMsVUFBVSxHQUFHZiwrQ0FBUUEsQ0FBcUI7UUFDdkRnQixhQUFhO1FBQ2JDLFNBQVM7UUFDVEMsWUFBWTtRQUNaQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsT0FBTztRQUNQQyxTQUFTO0lBQ1g7SUFFQSxNQUFNLENBQUNDLGdCQUFnQkMsa0JBQWtCLEdBQUd4QiwrQ0FBUUEsQ0FBd0I7SUFFNUUsTUFBTXlCLGdCQUFnQixPQUFPTjtRQUMzQixJQUFJO1lBQ0ZKLFVBQVVXLENBQUFBLE9BQVM7b0JBQUUsR0FBR0EsSUFBSTtvQkFBRUwsT0FBTztvQkFBTUMsU0FBUztnQkFBSztZQUV6REssUUFBUUMsR0FBRyxDQUFDLHNEQUFpRCxPQUFMVCxNQUFLO1lBRTdELHVDQUF1QztZQUN2QyxNQUFNVSxTQUFTekIsMEVBQXVCQTtZQUN0QyxNQUFNMEIsZ0JBQWdCM0IsNkVBQTBCQSxDQUFDMEI7WUFFakQsNkVBQTZFO1lBQzdFLE1BQU1FLFdBQVdaLFNBQVMsVUFBVSw0QkFBNEI7WUFFaEUsa0VBQWtFO1lBQ2xFLE1BQU1hLGFBQWEsTUFBTUYsY0FBY0cscUJBQXFCLENBQUNGLFVBQVVaO1lBRXZF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cUJBQ0UsOERBQUM3QyxxQkFBcUJtRSxRQUFRO1FBQUNELE9BQU9BO2tCQUNuQzVEOzs7Ozs7QUFHUDtJQTlOZ0JEOztRQUNzQlIsaURBQU9BOzs7S0FEN0JRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbnRleHRzL1Bhc3NrZXlXYWxsZXRDb250ZXh0LnRzeD9mZjE3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VWTEVJIH0gZnJvbSAnLi9WTEVJQ29udGV4dCdcbmltcG9ydCB7IFBhc3NrZXlBdXRoZW50aWNhdG9yLCBjcmVhdGVQYXNza2V5QXV0aGVudGljYXRvciwgZ2V0RGVmYXVsdFBhc3NrZXlDb25maWcgfSBmcm9tICdAL2xpYi9wYXNza2V5LWF1dGgnXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFzc2tleVdhbGxldFN0YXRlIHtcbiAgaXNDb25uZWN0ZWQ6IGJvb2xlYW5cbiAgYWRkcmVzczogc3RyaW5nIHwgbnVsbFxuICBjb250cmFjdElkOiBzdHJpbmcgfCBudWxsXG4gIHJvbGU6ICdidXllcicgfCAnc2VsbGVyJyB8IG51bGxcbiAgY3JlZGVudGlhbHM6IGFueSB8IG51bGxcbiAgZXJyb3I6IHN0cmluZyB8IG51bGxcbiAgbG9hZGluZzogYm9vbGVhblxufVxuXG5pbnRlcmZhY2UgUGFzc2tleVdhbGxldENvbnRleHRUeXBlIHtcbiAgd2FsbGV0OiBQYXNza2V5V2FsbGV0U3RhdGVcbiAgY29ubmVjdFdhbGxldDogKHJvbGU6ICdidXllcicgfCAnc2VsbGVyJykgPT4gUHJvbWlzZTx2b2lkPlxuICBkaXNjb25uZWN0V2FsbGV0OiAoKSA9PiB2b2lkXG4gIHN3aXRjaFJvbGU6IChyb2xlOiAnYnV5ZXInIHwgJ3NlbGxlcicpID0+IHZvaWRcbiAgZXhlY3V0ZVRyYW5zYWN0aW9uOiAocGFyYW1zOiBhbnkpID0+IFByb21pc2U8YW55PlxuICBnZXRBY2NvdW50SW5mbzogKCkgPT4gUHJvbWlzZTxhbnk+XG59XG5cbmNvbnN0IFBhc3NrZXlXYWxsZXRDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxQYXNza2V5V2FsbGV0Q29udGV4dFR5cGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZClcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVBhc3NrZXlXYWxsZXQoKSB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KFBhc3NrZXlXYWxsZXRDb250ZXh0KVxuICBpZiAoY29udGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VQYXNza2V5V2FsbGV0IG11c3QgYmUgdXNlZCB3aXRoaW4gYSBQYXNza2V5V2FsbGV0UHJvdmlkZXInKVxuICB9XG4gIHJldHVybiBjb250ZXh0XG59XG5cbmludGVyZmFjZSBQYXNza2V5V2FsbGV0UHJvdmlkZXJQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdE5vZGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFBhc3NrZXlXYWxsZXRQcm92aWRlcih7IGNoaWxkcmVuIH06IFBhc3NrZXlXYWxsZXRQcm92aWRlclByb3BzKSB7XG4gIGNvbnN0IHsgdmxlaSwgdmVyaWZ5Q3JlZGVudGlhbHMgfSA9IHVzZVZMRUkoKVxuICBjb25zdCBbd2FsbGV0LCBzZXRXYWxsZXRdID0gdXNlU3RhdGU8UGFzc2tleVdhbGxldFN0YXRlPih7XG4gICAgaXNDb25uZWN0ZWQ6IGZhbHNlLFxuICAgIGFkZHJlc3M6IG51bGwsXG4gICAgY29udHJhY3RJZDogbnVsbCxcbiAgICByb2xlOiBudWxsLFxuICAgIGNyZWRlbnRpYWxzOiBudWxsLFxuICAgIGVycm9yOiBudWxsLFxuICAgIGxvYWRpbmc6IGZhbHNlLFxuICB9KVxuXG4gIGNvbnN0IFtwYXNza2V5U2VydmljZSwgc2V0UGFzc2tleVNlcnZpY2VdID0gdXNlU3RhdGU8UGFzc2tleVNlcnZpY2UgfCBudWxsPihudWxsKVxuXG4gIGNvbnN0IGNvbm5lY3RXYWxsZXQgPSBhc3luYyAocm9sZTogJ2J1eWVyJyB8ICdzZWxsZXInKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldFdhbGxldChwcmV2ID0+ICh7IC4uLnByZXYsIGVycm9yOiBudWxsLCBsb2FkaW5nOiB0cnVlIH0pKVxuXG4gICAgICBjb25zb2xlLmxvZyhg8J+UkCBTdGFydGluZyBiaW9tZXRyaWMgYXV0aGVudGljYXRpb24gZm9yICR7cm9sZX0uLi5gKVxuXG4gICAgICAvLyBDcmVhdGUgUGFzc2tleUF1dGhlbnRpY2F0b3IgaW5zdGFuY2VcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGdldERlZmF1bHRQYXNza2V5Q29uZmlnKClcbiAgICAgIGNvbnN0IGF1dGhlbnRpY2F0b3IgPSBjcmVhdGVQYXNza2V5QXV0aGVudGljYXRvcihjb25maWcpXG5cbiAgICAgIC8vIFN0ZXAgMTogQXV0aGVudGljYXRlIHdpdGggUGFzc2tleSAoYmlvbWV0cmljKSAtIGZvbGxvd2luZyB0aGUgZmxvdyBkaWFncmFtXG4gICAgICBjb25zdCB1c2VyTmFtZSA9IHJvbGUgPT09ICdidXllcicgPyAnSm9obiBEb2UgLSBUZWNoQ29ycCBDRk8nIDogJ0phbmUgU21pdGggLSBTdXBwbGllckNvIFNhbGVzJ1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgb3IgY29ubmVjdCB0byBzbWFydCB3YWxsZXQgd2l0aCBiaW9tZXRyaWMgYXV0aGVudGljYXRpb25cbiAgICAgIGNvbnN0IHdhbGxldEluZm8gPSBhd2FpdCBhdXRoZW50aWNhdG9yLmNyZWF0ZU9yQ29ubmVjdFdhbGxldCh1c2VyTmFtZSwgcm9sZSlcbiAgICAgIFxuICAgICAgLy8gU3RvcmUgYXV0aGVudGljYXRvciBmb3IgZnV0dXJlIHVzZVxuICAgICAgc2V0UGFzc2tleVNlcnZpY2UoYXV0aGVudGljYXRvciBhcyBhbnkpXG5cbiAgICAgIGNvbnN0IGFkZHJlc3MgPSB3YWxsZXRJbmZvLmFkZHJlc3NcbiAgICAgIGNvbnN0IGNvbnRyYWN0SWQgPSB3YWxsZXRJbmZvLmNvbnRyYWN0SWRcblxuICAgICAgLy8gVmVyaWZ5IHZMRUkgY3JlZGVudGlhbHNcbiAgICAgIGxldCBjcmVkZW50aWFscyA9IG51bGxcbiAgICAgIGlmICh2bGVpLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjcmVkZW50aWFscyA9IGF3YWl0IHZlcmlmeUNyZWRlbnRpYWxzKHJvbGUpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCd2TEVJIGNyZWRlbnRpYWwgdmVyaWZpY2F0aW9uIGZhaWxlZDonLCBlcnJvcilcbiAgICAgICAgICAvLyBDb250aW51ZSB3aXRob3V0IGNyZWRlbnRpYWxzIGZvciBub3dcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzZXRXYWxsZXQoe1xuICAgICAgICBpc0Nvbm5lY3RlZDogdHJ1ZSxcbiAgICAgICAgYWRkcmVzcyxcbiAgICAgICAgY29udHJhY3RJZCxcbiAgICAgICAgcm9sZSxcbiAgICAgICAgY3JlZGVudGlhbHMsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgIH0pXG5cbiAgICAgIC8vIFN0b3JlIGluIGxvY2FsU3RvcmFnZSBmb3IgcGVyc2lzdGVuY2VcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwYXNza2V5V2FsbGV0U3RhdGUnLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGlzQ29ubmVjdGVkOiB0cnVlLFxuICAgICAgICBhZGRyZXNzLFxuICAgICAgICBjb250cmFjdElkLFxuICAgICAgICByb2xlLFxuICAgICAgICBjcmVkZW50aWFscyxcbiAgICAgIH0pKVxuXG4gICAgICBjb25zb2xlLmxvZyhg4pyFICR7cm9sZX0gd2FsbGV0IGNvbm5lY3RlZCBzdWNjZXNzZnVsbHlgKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gY29ubmVjdCB3YWxsZXQnXG4gICAgICBzZXRXYWxsZXQocHJldiA9PiAoe1xuICAgICAgICAuLi5wcmV2LFxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgIH0pKVxuICAgICAgY29uc29sZS5lcnJvcign4p2MIFdhbGxldCBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICBjb25zdCBkaXNjb25uZWN0V2FsbGV0ID0gKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAocGFzc2tleVNlcnZpY2UgJiYgdHlwZW9mIHBhc3NrZXlTZXJ2aWNlLmRpc2Nvbm5lY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcGFzc2tleVNlcnZpY2UuZGlzY29ubmVjdCgpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZHVyaW5nIHdhbGxldCBkaXNjb25uZWN0OicsIGVycm9yKVxuICAgIH1cbiAgICBcbiAgICBzZXRXYWxsZXQoe1xuICAgICAgaXNDb25uZWN0ZWQ6IGZhbHNlLFxuICAgICAgYWRkcmVzczogbnVsbCxcbiAgICAgIGNvbnRyYWN0SWQ6IG51bGwsXG4gICAgICByb2xlOiBudWxsLFxuICAgICAgY3JlZGVudGlhbHM6IG51bGwsXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgIH0pXG4gICAgXG4gICAgc2V0UGFzc2tleVNlcnZpY2UobnVsbClcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncGFzc2tleVdhbGxldFN0YXRlJylcbiAgICBjb25zb2xlLmxvZygn8J+UjCBXYWxsZXQgZGlzY29ubmVjdGVkJylcbiAgfVxuXG4gIGNvbnN0IHN3aXRjaFJvbGUgPSBhc3luYyAocm9sZTogJ2J1eWVyJyB8ICdzZWxsZXInKSA9PiB7XG4gICAgaWYgKHdhbGxldC5pc0Nvbm5lY3RlZCkge1xuICAgICAgYXdhaXQgY29ubmVjdFdhbGxldChyb2xlKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGV4ZWN1dGVUcmFuc2FjdGlvbiA9IGFzeW5jIChwYXJhbXM6IGFueSk6IFByb21pc2U8YW55PiA9PiB7XG4gICAgaWYgKCFwYXNza2V5U2VydmljZSB8fCAhd2FsbGV0LmlzQ29ubmVjdGVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dhbGxldCBub3QgY29ubmVjdGVkJylcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgc2V0V2FsbGV0KHByZXYgPT4gKHsgLi4ucHJldiwgbG9hZGluZzogdHJ1ZSwgZXJyb3I6IG51bGwgfSkpXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SQIEV4ZWN1dGluZyB0cmFuc2FjdGlvbiB3aXRoIGJpb21ldHJpYyBhdXRoZW50aWNhdGlvbi4uLmApXG4gICAgICBcbiAgICAgIC8vIFN0ZXAgMzogU2lnbiB0cmFuc2FjdGlvbiB3aXRoIHBhc3NrZXkgKGZvbGxvd2luZyB0aGUgZmxvdyBkaWFncmFtKVxuICAgICAgY29uc3QgdXNlck5hbWUgPSB3YWxsZXQucm9sZSA9PT0gJ2J1eWVyJyA/ICdKb2huIERvZSAtIFRlY2hDb3JwIENGTycgOiAnSmFuZSBTbWl0aCAtIFN1cHBsaWVyQ28gU2FsZXMnXG4gICAgICBcbiAgICAgIC8vIFVzZSB0aGUgYXV0aGVudGljYXRvciB0byBzaWduIHRoZSB0cmFuc2FjdGlvbiB3aXRoIGJpb21ldHJpYyBhdXRoZW50aWNhdGlvblxuICAgICAgaWYgKHBhc3NrZXlTZXJ2aWNlICYmIHR5cGVvZiAocGFzc2tleVNlcnZpY2UgYXMgYW55KS5zaWduVHJhbnNhY3Rpb25XaXRoUGFzc2tleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAocGFzc2tleVNlcnZpY2UgYXMgYW55KS5zaWduVHJhbnNhY3Rpb25XaXRoUGFzc2tleShwYXJhbXMsIHVzZXJOYW1lKVxuICAgICAgICBzZXRXYWxsZXQocHJldiA9PiAoeyAuLi5wcmV2LCBsb2FkaW5nOiBmYWxzZSB9KSlcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gbW9jayBpbXBsZW1lbnRhdGlvblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAocGFzc2tleVNlcnZpY2UgYXMgYW55KS5leGVjdXRlVHJhbnNhY3Rpb24ocGFyYW1zKVxuICAgICAgICBzZXRXYWxsZXQocHJldiA9PiAoeyAuLi5wcmV2LCBsb2FkaW5nOiBmYWxzZSB9KSlcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdUcmFuc2FjdGlvbiBmYWlsZWQnXG4gICAgICBzZXRXYWxsZXQocHJldiA9PiAoeyAuLi5wcmV2LCBlcnJvcjogZXJyb3JNZXNzYWdlLCBsb2FkaW5nOiBmYWxzZSB9KSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZ2V0QWNjb3VudEluZm8gPSBhc3luYyAoKTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgICBpZiAoIXBhc3NrZXlTZXJ2aWNlIHx8ICF3YWxsZXQuaXNDb25uZWN0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV2FsbGV0IG5vdCBjb25uZWN0ZWQnKVxuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCBwYXNza2V5U2VydmljZS5nZXRBY2NvdW50SW5mbygpXG4gIH1cblxuICAvLyBSZXN0b3JlIHdhbGxldCBzdGF0ZSBvbiBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHNhdmVkU3RhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGFzc2tleVdhbGxldFN0YXRlJylcbiAgICBpZiAoc2F2ZWRTdGF0ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShzYXZlZFN0YXRlKVxuICAgICAgICBpZiAocGFyc2VkLmlzQ29ubmVjdGVkICYmIHBhcnNlZC5yb2xlKSB7XG4gICAgICAgICAgLy8gRG9uJ3QgYXV0by1jb25uZWN0LCBqdXN0IHJlc3RvcmUgdGhlIHN0YXRlXG4gICAgICAgICAgc2V0V2FsbGV0KHByZXYgPT4gKHtcbiAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICAuLi5wYXJzZWQsXG4gICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgIH0pKVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcmVzdG9yZSB3YWxsZXQgc3RhdGU6JywgZXJyb3IpXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdwYXNza2V5V2FsbGV0U3RhdGUnKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW10pXG5cbiAgLy8gVXBkYXRlIGNyZWRlbnRpYWxzIHdoZW4gdkxFSSBpcyBpbml0aWFsaXplZCBhbmQgY3JlZGVudGlhbHMgYXJlIGF2YWlsYWJsZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh2bGVpLmlzSW5pdGlhbGl6ZWQgJiYgd2FsbGV0LmlzQ29ubmVjdGVkICYmIHdhbGxldC5yb2xlKSB7XG4gICAgICAvLyBDaGVjayBpZiBjcmVkZW50aWFscyBhcmUgYXZhaWxhYmxlIGJlZm9yZSB0cnlpbmcgdG8gdmVyaWZ5XG4gICAgICBjb25zdCBoYXNDcmVkZW50aWFscyA9IHdhbGxldC5yb2xlID09PSAnYnV5ZXInIFxuICAgICAgICA/ICh2bGVpLmNyZWRlbnRpYWxzLmpvaG4gJiYgdmxlaS5jcmVkZW50aWFscy50ZWNoY29ycClcbiAgICAgICAgOiAodmxlaS5jcmVkZW50aWFscy5qYW5lICYmIHZsZWkuY3JlZGVudGlhbHMuc3VwcGxpZXJjbylcbiAgICAgIFxuICAgICAgaWYgKGhhc0NyZWRlbnRpYWxzKSB7XG4gICAgICAgIHZlcmlmeUNyZWRlbnRpYWxzKHdhbGxldC5yb2xlKVxuICAgICAgICAgIC50aGVuKGNyZWRlbnRpYWxzID0+IHtcbiAgICAgICAgICAgIHNldFdhbGxldChwcmV2ID0+ICh7IC4uLnByZXYsIGNyZWRlbnRpYWxzIH0pKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHVwZGF0ZSBjcmVkZW50aWFsczonLCBlcnJvcilcbiAgICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVXNlIG1vY2sgY3JlZGVudGlhbHMgaWYgcmVhbCBvbmVzIGFyZW4ndCBhdmFpbGFibGUgeWV0XG4gICAgICAgIGNvbnN0IG1vY2tDcmVkZW50aWFscyA9IHtcbiAgICAgICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgICAgICBvcmdMRUk6IHdhbGxldC5yb2xlID09PSAnYnV5ZXInID8gJzUwNjcwMEdFMUcyOTMyNVFYMzYzJyA6ICc1NDkzMDBYT0NVWkQ0RU1LR1k5NicsXG4gICAgICAgICAgcGVyc29uTmFtZTogd2FsbGV0LnJvbGUgPT09ICdidXllcicgPyAnSm9obiBEb2UnIDogJ0phbmUgU21pdGgnLFxuICAgICAgICAgIHJvbGU6IHdhbGxldC5yb2xlID09PSAnYnV5ZXInID8gJ1Byb2N1cmVtZW50IE1hbmFnZXInIDogJ0NvbnRyYWN0IFNpZ25lcicsXG4gICAgICAgICAgc3BlbmRpbmdMaW1pdDogd2FsbGV0LnJvbGUgPT09ICdidXllcicgPyAxMDAwMDAgOiA1MDAwMDAsXG4gICAgICAgICAgbWF4Q29udHJhY3RWYWx1ZTogd2FsbGV0LnJvbGUgPT09ICdidXllcicgPyAxMDAwMDAgOiA1MDAwMDAsXG4gICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgb3JnTmFtZTogd2FsbGV0LnJvbGUgPT09ICdidXllcicgPyAnVGVjaENvcnAgSW5jLicgOiAnU3VwcGxpZXJDbyBMTEMnLFxuICAgICAgICAgICAgbGVpOiB3YWxsZXQucm9sZSA9PT0gJ2J1eWVyJyA/ICc1MDY3MDBHRTFHMjkzMjVRWDM2MycgOiAnNTQ5MzAwWE9DVVpENEVNS0dZOTYnLFxuICAgICAgICAgICAgcGVyc29uTmFtZTogd2FsbGV0LnJvbGUgPT09ICdidXllcicgPyAnSm9obiBEb2UnIDogJ0phbmUgU21pdGgnLFxuICAgICAgICAgICAgcm9sZTogd2FsbGV0LnJvbGUgPT09ICdidXllcicgPyAnUHJvY3VyZW1lbnQgTWFuYWdlcicgOiAnQ29udHJhY3QgU2lnbmVyJyxcbiAgICAgICAgICAgIHNwZW5kaW5nTGltaXQ6IHdhbGxldC5yb2xlID09PSAnYnV5ZXInID8gMTAwMDAwIDogNTAwMDAwLFxuICAgICAgICAgICAgbWF4Q29udHJhY3RWYWx1ZTogd2FsbGV0LnJvbGUgPT09ICdidXllcicgPyAxMDAwMDAgOiA1MDAwMDAsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldFdhbGxldChwcmV2ID0+ICh7IC4uLnByZXYsIGNyZWRlbnRpYWxzOiBtb2NrQ3JlZGVudGlhbHMgfSkpXG4gICAgICB9XG4gICAgfVxuICB9LCBbdmxlaS5pc0luaXRpYWxpemVkLCB3YWxsZXQuaXNDb25uZWN0ZWQsIHdhbGxldC5yb2xlLCB2bGVpLmNyZWRlbnRpYWxzXSlcblxuICBjb25zdCB2YWx1ZTogUGFzc2tleVdhbGxldENvbnRleHRUeXBlID0ge1xuICAgIHdhbGxldCxcbiAgICBjb25uZWN0V2FsbGV0LFxuICAgIGRpc2Nvbm5lY3RXYWxsZXQsXG4gICAgc3dpdGNoUm9sZSxcbiAgICBleGVjdXRlVHJhbnNhY3Rpb24sXG4gICAgZ2V0QWNjb3VudEluZm8sXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxQYXNza2V5V2FsbGV0Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17dmFsdWV9PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvUGFzc2tleVdhbGxldENvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VWTEVJIiwiY3JlYXRlUGFzc2tleUF1dGhlbnRpY2F0b3IiLCJnZXREZWZhdWx0UGFzc2tleUNvbmZpZyIsIlBhc3NrZXlXYWxsZXRDb250ZXh0IiwidW5kZWZpbmVkIiwidXNlUGFzc2tleVdhbGxldCIsImNvbnRleHQiLCJFcnJvciIsIlBhc3NrZXlXYWxsZXRQcm92aWRlciIsImNoaWxkcmVuIiwidmxlaSIsInZlcmlmeUNyZWRlbnRpYWxzIiwid2FsbGV0Iiwic2V0V2FsbGV0IiwiaXNDb25uZWN0ZWQiLCJhZGRyZXNzIiwiY29udHJhY3RJZCIsInJvbGUiLCJjcmVkZW50aWFscyIsImVycm9yIiwibG9hZGluZyIsInBhc3NrZXlTZXJ2aWNlIiwic2V0UGFzc2tleVNlcnZpY2UiLCJjb25uZWN0V2FsbGV0IiwicHJldiIsImNvbnNvbGUiLCJsb2ciLCJjb25maWciLCJhdXRoZW50aWNhdG9yIiwidXNlck5hbWUiLCJ3YWxsZXRJbmZvIiwiY3JlYXRlT3JDb25uZWN0V2FsbGV0IiwiaXNJbml0aWFsaXplZCIsIndhcm4iLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJkaXNjb25uZWN0V2FsbGV0IiwiZGlzY29ubmVjdCIsInJlbW92ZUl0ZW0iLCJzd2l0Y2hSb2xlIiwiZXhlY3V0ZVRyYW5zYWN0aW9uIiwicGFyYW1zIiwic2lnblRyYW5zYWN0aW9uV2l0aFBhc3NrZXkiLCJyZXN1bHQiLCJnZXRBY2NvdW50SW5mbyIsInNhdmVkU3RhdGUiLCJnZXRJdGVtIiwicGFyc2VkIiwicGFyc2UiLCJoYXNDcmVkZW50aWFscyIsImpvaG4iLCJ0ZWNoY29ycCIsImphbmUiLCJzdXBwbGllcmNvIiwidGhlbiIsImNhdGNoIiwibW9ja0NyZWRlbnRpYWxzIiwidmFsaWQiLCJvcmdMRUkiLCJwZXJzb25OYW1lIiwic3BlbmRpbmdMaW1pdCIsIm1heENvbnRyYWN0VmFsdWUiLCJkZXRhaWxzIiwib3JnTmFtZSIsImxlaSIsInZhbHVlIiwiUHJvdmlkZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./contexts/PasskeyWalletContext.tsx\n"));

/***/ })

});